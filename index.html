<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Window Quest</title>
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap" rel="stylesheet">
<style>
/* â”€â”€ RESET + ROOT â”€â”€ */
*, *::before, *::after { margin: 0; padding: 0; box-sizing: border-box; }

:root {
  --bg:     #06060a;
  --bg2:    #0d0d14;
  --w:      #ffffff;
  --w80:    rgba(255,255,255,0.80);
  --w50:    rgba(255,255,255,0.50);
  --w20:    rgba(255,255,255,0.20);
  --w10:    rgba(255,255,255,0.10);
  --w05:    rgba(255,255,255,0.05);
  --accent: #e8ff47;
  --danger: #ff4747;
  --mono:   'Share Tech Mono', monospace;
  --display:'Orbitron', sans-serif;
}

html { scroll-behavior: smooth; }
body {
  font-family: var(--mono);
  background: var(--bg);
  color: var(--w80);
  min-height: 100vh;
  overflow-x: hidden;
  cursor: none;
}

/* â”€â”€ CUSTOM CURSOR â”€â”€ */
#cur, #cur-ring {
  position: fixed; pointer-events: none; z-index: 99999; border-radius: 50%;
  transform: translate(-50%,-50%);
}
#cur { width: 7px; height: 7px; background: var(--accent); }
#cur-ring {
  width: 26px; height: 26px;
  border: 1px solid var(--w20);
  transition: width .25s, height .25s, border-color .25s;
}
body:has(button:hover) #cur-ring,
body:has(a:hover) #cur-ring { width: 44px; height: 44px; border-color: var(--accent); }

/* â”€â”€ GRID BG â”€â”€ */
body::before {
  content: '';
  position: fixed; inset: 0;
  background-image:
    linear-gradient(var(--w05) 1px, transparent 1px),
    linear-gradient(90deg, var(--w05) 1px, transparent 1px);
  background-size: 48px 48px;
  pointer-events: none; z-index: 0;
}

/* â”€â”€ PROGRESS BAR â”€â”€ */
#progress-bar {
  position: fixed; top: 0; left: 0; height: 2px;
  background: var(--accent); width: 0%;
  box-shadow: 0 0 12px var(--accent);
  z-index: 1000; transition: width .08s linear;
}
#progress-bar::after {
  content: ''; position: absolute;
  right: -3px; top: -3px;
  width: 8px; height: 8px; border-radius: 50%;
  background: var(--accent); box-shadow: 0 0 10px var(--accent);
}

/* â”€â”€ LOADING OVERLAY â”€â”€ */
#loading {
  position: fixed; inset: 0; background: var(--bg);
  z-index: 9999;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center; gap: 2rem;
  transition: opacity .8s ease, visibility .8s;
}
#loading.gone { opacity: 0; visibility: hidden; pointer-events: none; }

.load-title {
  font-family: var(--display);
  font-size: clamp(1.4rem, 5vw, 2.4rem);
  font-weight: 900; letter-spacing: .25em;
  color: var(--w);
  animation: flicker .6s ease;
}
.load-title span { color: var(--accent); }

.load-track {
  width: min(360px, 80vw); height: 2px;
  background: var(--w10); position: relative;
}
.load-fill {
  height: 100%; background: var(--accent);
  box-shadow: 0 0 14px var(--accent);
  animation: loadup 2.4s cubic-bezier(.4,0,.2,1) forwards;
}
@keyframes loadup { 0%{width:0} 30%{width:38%} 65%{width:70%} 85%{width:90%} 100%{width:100%} }

.load-label {
  font-size: .6rem; letter-spacing: .4em;
  color: var(--w20); text-transform: uppercase;
  animation: blink 1.1s step-end infinite;
}
.load-pct {
  position: absolute; right: 0; top: 8px;
  font-size: .6rem; color: var(--w50);
  letter-spacing: .15em;
}

@keyframes flicker { 0%,18%,22%,100%{opacity:1} 20%{opacity:.3} }
@keyframes blink { 50%{opacity:0} }

/* â”€â”€ HUD â”€â”€ */
#hud {
  position: fixed; top: 18px; right: 18px;
  background: rgba(6,6,10,.85);
  backdrop-filter: blur(20px);
  border: 1px solid var(--w10);
  padding: 14px 18px; min-width: 200px;
  z-index: 900;
  clip-path: polygon(0 0, calc(100% - 12px) 0, 100% 12px, 100% 100%, 0 100%);
}
.hud-head {
  font-family: var(--display);
  font-size: .48rem; letter-spacing: .35em; color: var(--w20);
  text-transform: uppercase;
  border-bottom: 1px solid var(--w10);
  padding-bottom: 8px; margin-bottom: 10px;
  display: flex; align-items: center; gap: 6px;
}
.hud-dot {
  width: 5px; height: 5px; border-radius: 50%;
  background: var(--accent); box-shadow: 0 0 6px var(--accent);
  animation: pulse 2s ease infinite;
}
@keyframes pulse { 0%,100%{opacity:1} 50%{opacity:.3} }

.hud-row {
  display: flex; justify-content: space-between;
  font-size: .62rem; padding: 3px 0; gap: 16px;
}
.hud-row .k { color: var(--w20); }
.hud-row .v { color: var(--w80); }
.hud-row .v.device-mobile  { color: #47ddff; }
.hud-row .v.device-tablet  { color: var(--accent); }
.hud-row .v.device-desktop { color: #a8ff78; }

/* â”€â”€ RESIZE TOAST â”€â”€ */
#resize-toast {
  position: fixed; bottom: 24px; left: 50%;
  transform: translateX(-50%) translateY(80px);
  background: var(--w10);
  border: 1px solid var(--w20);
  backdrop-filter: blur(12px);
  padding: 10px 22px;
  font-size: .6rem; letter-spacing: .3em; color: var(--w80);
  text-transform: uppercase;
  z-index: 800; transition: transform .3s ease;
  white-space: nowrap;
}
#resize-toast.show { transform: translateX(-50%) translateY(0); }

/* â”€â”€ BOSS BANNER â”€â”€ */
#boss-banner {
  position: fixed; top: 70px; left: 50%;
  transform: translateX(-50%) translateY(-120%);
  background: rgba(255,71,71,.12);
  border: 1px solid var(--danger);
  backdrop-filter: blur(16px);
  padding: 14px 28px;
  font-family: var(--display);
  font-size: .72rem; letter-spacing: .25em; color: var(--danger);
  text-transform: uppercase;
  z-index: 800; text-align: center;
  transition: transform .5s cubic-bezier(.34,1.56,.64,1);
  display: flex; align-items: center; gap: 14px;
}
#boss-banner.show { transform: translateX(-50%) translateY(0); }
#boss-dismiss {
  background: none; border: 1px solid var(--danger);
  color: var(--danger); font-family: var(--mono);
  font-size: .55rem; letter-spacing: .2em;
  padding: 4px 10px; cursor: pointer;
}
#boss-dismiss:hover { background: var(--danger); color: #000; }

/* â”€â”€ MAIN + SECTIONS â”€â”€ */
main { position: relative; z-index: 1; }

section { padding: 6rem 2rem; }
section + section { border-top: 1px solid var(--w05); }

/* â”€â”€ HERO â”€â”€ */
.hero {
  min-height: 100vh;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  text-align: center;
}
.hero-eye {
  font-size: .6rem; letter-spacing: .5em; color: var(--accent);
  text-transform: uppercase; margin-bottom: 1.5rem;
  animation: blink 2s step-end infinite;
}
.hero h1 {
  font-family: var(--display);
  font-size: clamp(3rem, 10vw, 8rem);
  font-weight: 900; color: var(--w);
  line-height: .9; letter-spacing: .05em;
  text-transform: uppercase;
}
.hero h1 em { color: var(--accent); font-style: normal; }
.hero-sub {
  margin-top: 2rem; font-size: .7rem;
  letter-spacing: .35em; color: var(--w20); text-transform: uppercase;
}
.hero-scroll { margin-top: 5rem; font-size: .58rem; letter-spacing: .3em; color: var(--w20); animation: blink 1.6s step-end infinite; }

/* â”€â”€ LEVEL SECTIONS â”€â”€ */
.level {
  min-height: 90vh;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  text-align: center;
}

.level-badge {
  font-size: .55rem; letter-spacing: .5em; color: var(--w20);
  text-transform: uppercase; margin-bottom: 1rem;
}
.level-badge span { color: var(--accent); }

.level h2 {
  font-family: var(--display);
  font-size: clamp(1.6rem, 4vw, 3rem);
  font-weight: 700; color: var(--w);
  letter-spacing: .15em; text-transform: uppercase;
  margin-bottom: 1.5rem;
}
.level p { max-width: 520px; font-size: .75rem; line-height: 1.9; color: var(--w50); }

/* locked / unlocked */
.level { opacity: .2; filter: grayscale(1); transform: translateY(30px); transition: opacity .7s ease, filter .7s ease, transform .7s ease; }
.level.unlocked { opacity: 1; filter: none; transform: none; }

/* Two-column grid on desktop */
.levels-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 0;
}
@media (min-width: 900px) {
  .levels-grid { grid-template-columns: 1fr 1fr; }
  .levels-grid .level { border-right: 1px solid var(--w05); }
  .levels-grid .level:nth-child(even) { border-right: none; }
}

/* Unlock badge */
.unlock-badge {
  display: inline-flex; align-items: center; gap: 6px;
  margin-top: 2rem;
  font-size: .55rem; letter-spacing: .35em; color: var(--accent);
  text-transform: uppercase;
  border: 1px solid rgba(232,255,71,.25);
  padding: 6px 14px;
  opacity: 0; transition: opacity .4s ease .5s;
}
.level.unlocked .unlock-badge { opacity: 1; }

/* Icon grid inside levels */
.icon-row {
  display: flex; gap: 1.2rem; justify-content: center;
  margin: 2rem 0; flex-wrap: wrap;
}
.icon-box {
  width: 56px; height: 56px;
  border: 1px solid var(--w10);
  display: flex; align-items: center; justify-content: center;
  font-size: 1.4rem; transition: border-color .3s, box-shadow .3s;
}
.icon-box:hover { border-color: var(--accent); box-shadow: 0 0 14px rgba(232,255,71,.2); }

/* â”€â”€ BOSS SECTION â”€â”€ */
.boss {
  min-height: 100vh;
  display: flex; flex-direction: column;
  align-items: center; justify-content: center;
  text-align: center;
  background: radial-gradient(ellipse at center, rgba(255,71,71,.06) 0%, transparent 60%);
}
.boss h2 {
  font-family: var(--display);
  font-size: clamp(2rem, 6vw, 5rem);
  font-weight: 900; color: var(--danger);
  letter-spacing: .15em; text-transform: uppercase;
  text-shadow: 0 0 40px rgba(255,71,71,.5);
  animation: dangerPulse 2s ease infinite;
}
@keyframes dangerPulse { 0%,100%{text-shadow: 0 0 40px rgba(255,71,71,.4)} 50%{text-shadow: 0 0 80px rgba(255,71,71,.8)} }

.boss-eye { font-size: 4rem; margin-bottom: 1.5rem; animation: blink 3s step-end infinite; }
.boss p { max-width: 480px; font-size: .75rem; line-height: 1.9; color: var(--w50); margin-top: 1.5rem; }

.btn-danger {
  margin-top: 3rem; padding: 1rem 3rem;
  border: 1px solid var(--danger); background: transparent;
  color: var(--danger); font-family: var(--mono);
  font-size: .65rem; letter-spacing: .4em;
  text-transform: uppercase; cursor: pointer;
  transition: background .3s, color .3s;
}
.btn-danger:hover { background: var(--danger); color: #000; }

/* Boss locked */
.boss { opacity: .15; filter: grayscale(1); transform: translateY(30px); transition: opacity .7s ease, filter .7s ease, transform .7s ease; }
.boss.unlocked { opacity: 1; filter: none; transform: none; }

/* â”€â”€ FOOTER â”€â”€ */
footer {
  padding: 3rem 2rem; text-align: center;
  font-size: .55rem; letter-spacing: .35em;
  color: var(--w20); text-transform: uppercase;
  border-top: 1px solid var(--w05);
}
</style>
</head>
<body>

<!-- Cursor -->
<div id="cur"></div>
<div id="cur-ring"></div>

<!-- Progress bar -->
<div id="progress-bar"></div>

<!-- Loading overlay -->
<div id="loading">
  <div class="load-title">WINDOW<span>QUEST</span></div>
  <div class="load-track">
    <div class="load-fill"></div>
    <div class="load-pct" id="load-pct">0%</div>
  </div>
  <div class="load-label">Loading your questâ€¦</div>
</div>

<!-- HUD -->
<div id="hud">
  <div class="hud-head"><div class="hud-dot"></div> System Status</div>
  <div class="hud-row"><span class="k">DIMS</span><span class="v" id="hud-dims">â€”</span></div>
  <div class="hud-row"><span class="k">DEVICE</span><span class="v" id="hud-device">â€”</span></div>
  <div class="hud-row"><span class="k">SCROLL</span><span class="v" id="hud-scroll">0%</span></div>
  <div class="hud-row"><span class="k">UNLOCKED</span><span class="v" id="hud-unlocked">0 / 5</span></div>
</div>

<!-- Resize toast -->
<div id="resize-toast">âš™ Window resized</div>

<!-- Boss banner -->
<div id="boss-banner">
  âš  Boss Approaching!
  <button id="boss-dismiss">DISMISS</button>
</div>

<main>

  <!-- HERO -->
  <section class="hero">
    <div class="hero-eye">â–¸ SYSTEM ONLINE â—‚</div>
    <h1>Window<br><em>Quest</em></h1>
    <div class="hero-sub">Three events Â· Five levels Â· One boss</div>
    <div class="hero-scroll">â†“ scroll to begin your quest â†“</div>
  </section>

  <!-- LEVELS GRID -->
  <div class="levels-grid">

    <!-- Level 1 -->
    <section class="level" id="lv1">
      <div class="level-badge">Level <span>01</span></div>
      <div class="icon-row">
        <div class="icon-box">âš¡</div><div class="icon-box">ğŸ“¦</div><div class="icon-box">ğŸ”Œ</div>
      </div>
      <h2>Load Event</h2>
      <p>The <code>window.load</code> event fires once the page and all its resources are fully loaded. It's the starting gun â€” your quest officially begins here.</p>
      <div class="unlock-badge">âœ“ Level Unlocked</div>
    </section>

    <!-- Level 2 -->
    <section class="level" id="lv2">
      <div class="level-badge">Level <span>02</span></div>
      <div class="icon-row">
        <div class="icon-box">â†•</div><div class="icon-box">â†”</div><div class="icon-box">ğŸ“</div>
      </div>
      <h2>Resize Event</h2>
      <p>The <code>window.resize</code> event fires whenever the viewport changes. Throttle it â€” naive listeners run hundreds of times per second and destroy performance.</p>
      <div class="unlock-badge">âœ“ Level Unlocked</div>
    </section>

    <!-- Level 3 -->
    <section class="level" id="lv3">
      <div class="level-badge">Level <span>03</span></div>
      <div class="icon-row">
        <div class="icon-box">ğŸ“œ</div><div class="icon-box">ğŸ¯</div><div class="icon-box">ğŸ§­</div>
      </div>
      <h2>Scroll Event</h2>
      <p>The <code>window.scroll</code> event tracks the user's position. Throttle this too â€” it fires on every pixel of movement. Use it to reveal content and track progress.</p>
      <div class="unlock-badge">âœ“ Level Unlocked</div>
    </section>

    <!-- Level 4 -->
    <section class="level" id="lv4">
      <div class="level-badge">Level <span>04</span></div>
      <div class="icon-row">
        <div class="icon-box">â±</div><div class="icon-box">ğŸ”</div><div class="icon-box">âš™</div>
      </div>
      <h2>Throttle &amp; Debounce</h2>
      <p>Throttle limits how often a function runs (once per N ms). Debounce waits until a burst is over. Scroll = throttle. Resize = debounce or throttle. Both = performance.</p>
      <div class="unlock-badge">âœ“ Level Unlocked</div>
    </section>

    <!-- Level 5 -->
    <section class="level" id="lv5">
      <div class="level-badge">Level <span>05</span></div>
      <div class="icon-row">
        <div class="icon-box">ğŸ¨</div><div class="icon-box">ğŸ’¡</div><div class="icon-box">ğŸ†</div>
      </div>
      <h2>DOM Unlocks</h2>
      <p>Combine scroll position with <code>getBoundingClientRect()</code> to detect when elements enter the viewport. Fade them in, slide them up, reveal them â€” the classic "unlock" pattern.</p>
      <div class="unlock-badge">âœ“ Level Unlocked</div>
    </section>

  </div><!-- /levels-grid -->

  <!-- BOSS -->
  <section class="boss" id="boss">
    <div class="boss-eye">ğŸ‘</div>
    <h2>Window Object</h2>
    <p>The final boss governs all three events: <code>load</code>, <code>resize</code>, and <code>scroll</code>. It is the apex of the browser's global scope. Only those who have mastered throttle, debounce, and viewport math may challenge it.</p>
    <button class="btn-danger">âš” Accept Final Challenge</button>
    <div class="unlock-badge" style="margin-top:1.5rem">ğŸ‘‘ Boss Unlocked</div>
  </section>

  <footer>Window Quest v1.0 Â· load Â· resize Â· scroll Â· All events mastered</footer>

</main>

<script>
// â”€â”€ UTILS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function throttle(fn, ms) {
  let last = 0;
  return function(...args) {
    const now = Date.now();
    if (now - last >= ms) { last = now; fn.apply(this, args); }
  };
}
function debounce(fn, ms) {
  let timer;
  return function(...args) { clearTimeout(timer); timer = setTimeout(() => fn.apply(this, args), ms); };
}

// â”€â”€ CURSOR â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const cur  = document.getElementById('cur');
const ring = document.getElementById('cur-ring');
let mx = 0, my = 0, rx = 0, ry = 0;

document.addEventListener('mousemove', e => {
  mx = e.clientX; my = e.clientY;
  cur.style.left = mx + 'px'; cur.style.top = my + 'px';
});
(function loop() {
  rx += (mx - rx) * .1; ry += (my - ry) * .1;
  ring.style.left = rx + 'px'; ring.style.top = ry + 'px';
  requestAnimationFrame(loop);
})();

// â”€â”€ HUD â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
let totalLevels = document.querySelectorAll('.level').length + 1; // +boss
let unlockedCount = 0;

function deviceLabel(w) {
  if (w < 768)  return ['MOBILE',  'device-mobile'];
  if (w < 900)  return ['TABLET',  'device-tablet'];
  return              ['DESKTOP', 'device-desktop'];
}

function updateHUD() {
  const w = window.innerWidth, h = window.innerHeight;
  document.getElementById('hud-dims').textContent = w + ' Ã— ' + h;
  const [label, cls] = deviceLabel(w);
  const el = document.getElementById('hud-device');
  el.textContent = label;
  el.className = 'v ' + cls;
}

function updateScrollHUD(pct) {
  document.getElementById('hud-scroll').textContent = Math.round(pct * 100) + '%';
}

function updateUnlockHUD() {
  document.getElementById('hud-unlocked').textContent = unlockedCount + ' / ' + totalLevels;
}

// â”€â”€ LOAD EVENT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const overlay = document.getElementById('loading');
const loadPct = document.getElementById('load-pct');
let pct = 0;
const pctTick = setInterval(() => {
  pct = Math.min(pct + Math.random() * 14, 95);
  loadPct.textContent = Math.round(pct) + '%';
}, 180);

window.addEventListener('load', () => {
  clearInterval(pctTick);
  loadPct.textContent = '100%';
  setTimeout(() => {
    overlay.classList.add('gone');
    updateHUD();
    checkUnlocks();
  }, 700);
});

// â”€â”€ RESIZE EVENT (debounced 150ms) â”€â”€â”€â”€â”€â”€â”€
let toastTimer;
const onResize = debounce(() => {
  updateHUD();
  const toast = document.getElementById('resize-toast');
  toast.classList.add('show');
  clearTimeout(toastTimer);
  toastTimer = setTimeout(() => toast.classList.remove('show'), 1800);
}, 150);

window.addEventListener('resize', onResize);

// â”€â”€ SCROLL EVENT (throttled 80ms) â”€â”€â”€â”€â”€â”€â”€â”€
function scrollPct() {
  const max = document.documentElement.scrollHeight - window.innerHeight;
  return max > 0 ? window.scrollY / max : 0;
}

const unlockedIds = new Set();
let bossShown = false, bossDismissed = false;

function checkUnlocks() {
  const vBottom = window.scrollY + window.innerHeight;

  document.querySelectorAll('.level, .boss').forEach(sec => {
    const top = sec.getBoundingClientRect().top + window.scrollY;
    if (vBottom > top + sec.offsetHeight * 0.12) {
      if (!sec.classList.contains('unlocked')) {
        sec.classList.add('unlocked');
        unlockedCount++;
        updateUnlockHUD();
      }
    }
  });
}

const onScroll = throttle(() => {
  const p = scrollPct();
  document.getElementById('progress-bar').style.width = (p * 100) + '%';
  updateScrollHUD(p);
  checkUnlocks();

  const banner = document.getElementById('boss-banner');
  if (p >= 0.7 && !bossShown && !bossDismissed) {
    bossShown = true;
    banner.classList.add('show');
    setTimeout(() => { if (!bossDismissed) banner.classList.remove('show'); }, 5000);
  }
  if (p < 0.65) bossShown = false;
}, 80);

window.addEventListener('scroll', onScroll);

// â”€â”€ BOSS DISMISS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById('boss-dismiss').addEventListener('click', () => {
  bossDismissed = true;
  document.getElementById('boss-banner').classList.remove('show');
});

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
updateHUD();
updateUnlockHUD();
</script>
</body>
</html>